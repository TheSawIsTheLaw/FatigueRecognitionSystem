\section{Исследовательская часть}

\subsection{Технические характеристики}

Технические характеристики ЭВМ, на котором выполнялись исследования:

\begin{itemize}[leftmargin=1.6\parindent]
\item операционная система: Manjaro Linux (5.13.19-2);
\item оперативная память: 16 гигабайт;
\item процессор: Intel(R) Core(TM) i7-10510U CPU @ 1.80GHz.
\end{itemize}

\subsection{Сравнение времени исполнения запросов в базы данных Postgres и InfluxDB с использованием языка программирования Kotlin}

\subsubsection{Средства проведения стресс-тестирования базы данных InfluxDB}

InfluxDB inch tool \cite{inchTool} --- это средство симуляции потоковой передачи данных в InfluxDB для определения производительности системы.

Интерфейс приложения предполагает выбор количества отправляемых записей в базу данных, задание количества клиента, количества записей в серии отправки и длительности стресс-тестирования.

Данный проект предназначен для тестирования InlfluxDB версии 1.8, в связи с чем использование данного средства для версии, используемой в проекте (2.0), невозможна.

Apache JMeter \cite{jmeter} --- это средство, разработанное для нагрузочного тестирования функционального поведения и измерения производительности с открытым исходным кодом.

В текущей версии проекта доступен Backend Listener, сконфигурированный специально для прослушивания порта InfluxDB и получения данных о выполняемых действиях.

Данный проект предполагает направления POST-запросов на адрес тестируемой базы данных, и изъятие данных по обработке данных запросов. При попытке реализации данного метода в документации проекта не было обнаружено конечного адреса отправки POST-запросов. В связи с данной проблемой данный метод тестирования был исключен из рассмотрения.

\subsubsection{Среднее количество принимаемых от клиента данных}

Согласно исследованиям 2014 года средняя продолжительность рабочего дня у российских организаций --- 9 часов 50 минут. В Москве средняя продолжительность составляет 10 часов 31 минуту, а в Калининградской области --- 9 часов 34 минуты. \cite{yandRes}

Количество поступающих данных от одного сотрудника за день может быть определено по формуле:

\begin{equation}
\label{eq:numberOfRecords}
N_R = H \cdot M_R \cdot 60 + M \cdot M_R,
\end{equation}
\eqexplSetIntro{где}
\begin{eqexpl}[15mm]
\item{$H$} количество часов в рабочем дне пользователя;
\item{$M_R$} количество записей, поступающих от пользователя в минуту;
\item{$M$} количество минут в рабочем дне пользователя.
\end{eqexpl}

С использованием \eqref{eq:numberOfRecords} можно определить, что для Москвы среднее количество записей по единственной характеристике, учитывая обеденное время (предположительно час), будет равным 571. Для Калининградской области данное значение составит 514 записей.

Принимая за среднюю скорость печати скорость, равную 200 символов в минуту, и принимая среднее количество кликов мыши равным 100 кликов в минуту, максимальное количество записей, направленное пользователем за рабочий день в Москве составит 114 тысяч, однако, учитывая перерывы и мыслительную работу, значение в 28 тысяч записей за день принимается в качестве среднего количества записей от пользователя в день.

\subsubsection{Сравнение времени исполнения запросов в базы данных}

В таблице \ref{table:time1} представлены результаты выполнения замеров скорости исполнения запросов на изъятие данных из сравниваемых баз данных. На рисунке \ref{fig:time1} представлены данные из таблицы \ref{table:time1} в виде графика.

\begin{table}[H]
	\begin{center}
		\caption{\label{table:time1} Замеры времени получения требуемого набора данных по пользователю в базах данных.}
		\begin{tabular}{|p{4cm} |p{5cm}|p{3cm} |p{3cm}|}
 			\hline
			Общее количество\newline записей в таблице \newline (Postgres) & Количество записей,\newline принадлежащих \newline пользователю & Время \newline исполнения\newline запроса (Postgres),\newline мс & Время \newline исполнения\newline запроса (InfluxDB),\newline мс \\ [0.5ex] 
 			\hline\hline
 			30000 & 10000 & 188 & 64 \\
 			\hline
 			36000 & 12000 & 248 & 65 \\
 			\hline
 			42000 & 14000 & 274 & 60 \\
 			\hline
 			48000 & 16000 & 261 & 60 \\
 			\hline
 			54000 & 18000 & 266 & 61 \\
 			\hline
 			60000 & 20000 & 284 & 68 \\
 			\hline
 			66000 & 22000 & 316 & 76 \\
 			\hline
 			72000 & 24000 & 340 & 65 \\
 			\hline
 			78000 & 26000 & 363 & 65 \\
 			\hline
 			84000 & 28000 & 410 & 67\\
 			\hline	
 			
 			\end{tabular}
	\end{center}
\end{table}

\begin{figure}[H]
\begin{center}
	\begin{tikzpicture}[scale=1]

\begin{axis}[
  		  	axis lines = left,
  		  	xlabel = количество записей,
  		  	ylabel = {время, мс},
			legend pos=north west,
			ymajorgrids=true
		] 
		\addplot[color=red] table[x index=0, y index=1] {postgres.dat};
		\addplot[color=green, mark=square] table[x index=0, y index=1] {influx.dat};

		\addlegendentry{Postgres}
		\addlegendentry{InfluxDB}
		\end{axis}
	\end{tikzpicture}
	\captionsetup{justification=centering}
	\caption{Зависимость времени исполнения запроса от количества записей в таблице по пользователю.}
	\label{fig:time1}
	\end{center}
\end{figure}

Из данных, предоставленных на рисунке \ref{fig:time1} видно, что время исполнения команды с использованием СУБД InfluxDB сравнимо с константным на рассмотренных значениях количества записей. Время исполнения запросов в СУБД Postgres было более долгим и при увеличении количества записей росло.

По таблице \ref{table:time1} были получены следующие результаты:

\begin{itemize}[leftmargin=1.6\parindent]
\item пик превосходства в скорости исполенния был достигнут InfluxDB на количестве записей равным 28 тысяч --- запрос был выполнен быстрее в 6 раз;
\item в среднем InfluxDB исполняет запрос в $\approx 4.53$ раза быстрее своего конкурента;
\item минимальная разница в скорости исполенния запрсоа составила 124 миллисекунды, максимальная --- 343 миллисекунды.
\end{itemize}

Для исследования в базе данных Postgres были созданы таблица пользователей и таблица, содержащая данные о нажатых клавишах клавиатуры.

В качестве средств доступа к базам данных использовались решения: PostgreSQL JDBC Driver \cite{jdbc} и InfluxDB Client Kotlin. Замеры производились с использованием утилиты measureTimeMillis \cite{measureTimeMillis}.

\subsubsection*{Вывод}

Поставленный эксперимент показал преимущество скорости исполнения запросов в базу данных InfluxDB над скоростью исполнения запросов в базу данных Postgres с использованием языка программирования Kotlin.

Исследования также показали, что время исполнения запросов в InfluxDB при количестве записей в таблице от 10 тысяч до 28 тысяч практически можно приравнять к константе. При этом в среднем InfluxDB позволяет получить ответ в $\approx 4.53$ раза быстрее, чем Postrgres.

\subsection{Сравнение количества успешных определений работоспособности пользователя путем варьирования фактора нечеткости}

\subsubsection{Предварительные условия}

В данном исследовании используется набор данных, полученных на студенте, выполняющим письменную работу. Во время сбора данных объекту исследования было разрешено отвлекаться на отдых, выполняя действия развлекательного характера в сети Интернет.

Полные данные, в силу их количества, приведены быть не могут. В листингах \ref{lst:testKeysLogging} (приложение В, с. \pageref{chp:application-c}) и \ref{lst:testMouseClicksLogging} (приложение В, с. \pageref{chp:application-c}) приведена часть полученных по пользователю данных.

В качестве варьируемого параметра принимается критерий нечеткости при проведении кластеризации методом c-средних.

По тесту на реакцию было определено, что передаваемые анализатору данные должны говорить о том, что пользователю требуется отдых.

\subsubsection{Сравнение количества успешных определений работоспособности по клавиатуре}

В таблице \ref{table:time2} представлены результаты определений работоспособности пользователя по заданной выборке с использованием различных факторов нечеткости. Для каждого значения фактора проводилось 10 определений состояния.

\begin{table}[H]
	\begin{center}
		\caption{\label{table:time2} Количество определений состояния системой в зависимости от значения критерия нечеткости.}
\begin{tabular}{|c|ccc|}
\hline
\multirow{2}{*}{Значение критерия нечеткости} & \multicolumn{3}{c|}{Количество определений состояния системой}\\ \cline{2-4} & \multicolumn{1}{c|}{Неопределен} & \multicolumn{1}{c|}{Устал} & Работоспособен \\ \hline
1.5& \multicolumn{1}{c|}{10}            & \multicolumn{1}{c|}{0}      &0 \\ \hline
2.0& \multicolumn{1}{c|}{10}            & \multicolumn{1}{c|}{0}     &0 \\ \hline
2.5& \multicolumn{1}{c|}{10}            & \multicolumn{1}{c|}{0}     &0 \\ \hline
3.0& \multicolumn{1}{c|}{10}            & \multicolumn{1}{c|}{0}      &0 \\ \hline
3.5& \multicolumn{1}{c|}{10}            & \multicolumn{1}{c|}{0}      &0 \\ \hline
4.0& \multicolumn{1}{c|}{10}            & \multicolumn{1}{c|}{0}      &0 \\ \hline
4.5& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}      &0 \\ \hline
5.0& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}      &0 \\ \hline
5.5& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}      &0 \\ \hline
6.0& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}      &0 \\ \hline
6.5& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}      &0 \\ \hline
7.0& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}      &0 \\ \hline
7.5& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}      &0 \\ \hline
8.0& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}      &0 \\ \hline
8.5& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}      &0 \\ \hline
9.0& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}      &0 \\ \hline
9.5& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}      &0 \\ \hline
10.0& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}     &0 \\ \hline
\end{tabular}
	\end{center}
\end{table}

Таким образом, можно сделать вывод о том, что наилучшими значениями, принимаемыми за критерий нечеткости, могут служить значения больше или равные 4.5, так как в таком случае шанс успешного определения состояния пользователя составляет $100\%$.

\subsubsection*{Вывод}

В результате проведенного исследования было определено, что на заданной выборке наиболее точными в использовании являются факторы нечеткости, лежащие на отрезке от 4.5 до 10.0, так как при их использовании имеем $100\%$ верных распознаваний.

\subsubsection{Сравнение количества успешных определений работоспособности по мыши}

В таблице \ref{table:time3} представлены результаты определений работоспособности пользователя по заданной выборке с использованием различных факторов нечеткости. Для каждого значения фактора проводилось 10 определений состояния.

\begin{table}[H]
	\begin{center}
		\caption{\label{table:time3} Количество определений состояния системой в зависимости от значения критерия нечеткости.}
\begin{tabular}{|c|ccc|}
\hline
\multirow{2}{*}{Значение критерия нечеткости} & \multicolumn{3}{c|}{Количество определений состояния системой}\\ \cline{2-4} & \multicolumn{1}{c|}{Неопределен} & \multicolumn{1}{c|}{Устал} & Работоспособен \\ \hline
1.5& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}    &0 \\ \hline
2.0& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}      &0 \\ \hline
2.5& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}      &0 \\ \hline
3.0& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}      &0 \\ \hline
3.5& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}      &0 \\ \hline
4.0& \multicolumn{1}{c|}{10}            & \multicolumn{1}{c|}{0}      &0 \\ \hline
4.5& \multicolumn{1}{c|}{8}            & \multicolumn{1}{c|}{2}      &0 \\ \hline
5.0& \multicolumn{1}{c|}{6}            & \multicolumn{1}{c|}{4}      &0 \\ \hline
5.5& \multicolumn{1}{c|}{9}            & \multicolumn{1}{c|}{1}      &0 \\ \hline
6.0& \multicolumn{1}{c|}{9}            & \multicolumn{1}{c|}{1}      &0 \\ \hline
6.5& \multicolumn{1}{c|}{10}            & \multicolumn{1}{c|}{0}      &0 \\ \hline
7.0& \multicolumn{1}{c|}{10}            & \multicolumn{1}{c|}{0}      &0 \\ \hline
7.5& \multicolumn{1}{c|}{10}            & \multicolumn{1}{c|}{0}      &0 \\ \hline
8.0& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}      &0 \\ \hline
8.5& \multicolumn{1}{c|}{10}            & \multicolumn{1}{c|}{0}      &0 \\ \hline
9.0& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}      &0 \\ \hline
9.5& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}      &0 \\ \hline
10.0& \multicolumn{1}{c|}{0}            & \multicolumn{1}{c|}{10}     &0 \\ \hline
\end{tabular}
	\end{center}
\end{table}

Таким образом, можно сделать вывод о том, что наилучшими значениями, принимаемыми за критерий нечеткости, могут служить значения 1.5 -- 3.5, 8.0, 9.0 -- 10.0, так как в таком случае шанс успешного определения состояния пользователя составляет $100\%$.

\subsubsection*{Вывод}
В результате проведенного исследования было определено, что на заданной выборке наиболее точными в использовании являются факторы нечеткости 1.5 -- 3.5, 8.0, 9.0 -- 10.0. Иные факторы не позволяют с той же точностью в $100\%$ сказать о том, что в данный момент пользователю требуется отдых. Причем критерий нечеткости 5.0 позволил с шансом в $40\%$ распознать опасное состояние оператора, в то время как оставшиеся критерии имели шанс в $20\%$ и $10\%$.

\subsection*{Вывод}
Исследование в области сравнения времени исполнения запросов в базы данных показало преимущество скорости исполнения запросов в базу данных InfluxDB над скоростью исполнения запросов в базу данных Postgres с использованием языка программирования Kotlin. Результаты показали, что время исполнения запросов в InfluxDB при количестве записей в таблице от 10 тысяч до 28 тысяч практически можно приравнять к константе. При этом в среднем InfluxDB позволяет получить ответ в $\approx 4.53$ раза быстрее, чем Postgres.

Исследования в области сравнения количества успешных определений работоспособности пользователя показали, что при распознавании усталости с использованием клавиатуры при варьировании фактора нечеткости было получено $\approx 66\%$ верных результатов, что на $16\%$ больше, чем при использовании мыши с точностью $50\%$. Таким образом, на заданной выборке более эффективным устройством для распознавания усталости оказалась клавиатура. При этом для клавиатуры наиболее точными факторами нечеткости являются значения, лежащие на отрезке от 4.5 до 10.0, которые позволили с точностью в $100\%$ определить состояние оператора. Для мыши наиболее точными факторами нечеткости являются 1.5 -- 3.5, 8.0, 9.0 -- 10.0, которые также позволили с точностью в 100\% определить состояние оператора.

\pagebreak